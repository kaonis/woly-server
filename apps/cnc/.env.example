# Server Configuration
PORT=8080
NODE_ENV=development

# Database Configuration
# DB_TYPE: 'postgres' or 'sqlite'
DB_TYPE=sqlite

# SQLite: Provide path to database file (when DB_TYPE=sqlite)
DATABASE_URL=./db/woly-cnc.db

# PostgreSQL: Use connection string (when DB_TYPE=postgres)
# DATABASE_URL=postgresql://user:pass@host:5432/db

# CORS — comma-separated list of allowed origins (production only; dev allows all)
# Native mobile apps (React Native) send no Origin header and are always allowed.
# For Expo Web or other browser clients, list their origins here.
# Example:
# CORS_ORIGINS=https://woly.expo.app,https://your-domain.com
CORS_ORIGINS=

# Security
NODE_AUTH_TOKENS=token1,token2,token3
JWT_SECRET=your-secret-key-change-in-production
JWT_ISSUER=woly-cnc
JWT_AUDIENCE=woly-api
WS_REQUIRE_TLS=false
WS_ALLOW_QUERY_TOKEN_AUTH=true
# Maximum inbound WebSocket messages accepted per connection per second
WS_MESSAGE_RATE_LIMIT_PER_SECOND=100

# Rate Limiting
# Auth endpoint rate limiting (prevent brute-force attacks)
# AUTH_RATE_LIMIT_WINDOW_MS: Time window in milliseconds (default: 900000 = 15 minutes)
# AUTH_RATE_LIMIT_MAX: Maximum requests per window (default: 5)
AUTH_RATE_LIMIT_WINDOW_MS=900000
AUTH_RATE_LIMIT_MAX=5

# Node Management
NODE_HEARTBEAT_INTERVAL=30000
NODE_TIMEOUT=90000

# Command Management
COMMAND_TIMEOUT=30000
COMMAND_RETENTION_DAYS=30
# Maximum retry attempts for failed commands (default: 3)
COMMAND_MAX_RETRIES=3
# Base delay in milliseconds for exponential backoff (default: 1000)
# Actual delay = COMMAND_RETRY_BASE_DELAY_MS * 2^(retry_count) with ±25% jitter
COMMAND_RETRY_BASE_DELAY_MS=1000

# Logging
LOG_LEVEL=info
